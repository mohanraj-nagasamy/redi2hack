# Step 0: Copy & Paste
# Copy & Paste the whole content (Command/Ctrl-A, Command/Ctrl-X and Command/Ctrl-V) in the editor
# there is a bug that executes the same query.

# Start with Step 0
# Step 1: Run createCustomer mutation to create a customer using fields: name, and industry
# Redis commands used: HMSET, SADD, and XADD
mutation createCustomer { # Place cursor here: Run (Command/Ctrl-Enter)
    createCustomer(input: { name: "RedisLabs", industry: "Data Storage" }) {
        id
        name
        industry
    }
}

# Step 1.1: Goto GraphQL-Streaming-Demo:Tab-1, and GraphQL-Streaming-Demo:Tab-2 to see the created events

#------------

# Step 2: Run updateCustomer mutation to update a customer using fields: customerId, name, and industry
# Redis commands used: HGETALL, DEL, HMSET, SADD, and XADD
mutation updateCustomer { # Place cursor here: Run (Command/Ctrl-Enter)
    updateCustomer(
        customerId: 6
        input: { name: "RedisLabs is awesome", industry: "Data Storage" }
    ) {
        id
        name
        industry
    }
}

# Step 2.1: Goto GraphQL-Streaming-Demo:Tab-1, and GraphQL-Streaming-Demo:Tab-2 to see the updated events

#------------

# Step 3: Run deleteCustomer mutation to delete a customer using fields: customerId
# Redis commands used: HGETALL, DEL, SREM, and XADD
mutation deleteCustomer {
    deleteCustomer(customerId: 2) {
        id
        name
    }
}

# Step 3.1: Goto GraphQL-Streaming-Demo:Tab-1, and GraphQL-Streaming-Demo:Tab-2 to see the deleted events

#------------


# Step 4: Run customers query to see the existing customers
# Redis commands used: SMEMBERS, HGETALL
query customers { # Place cursor here: Run (Command/Ctrl-Enter)
    customers {
        id
        name
        industry
    }
}

# Step 5: Run searchCustomer_1 query to search customer based on customer fields: id, name, and industry
# sorted by name
# Redis commands used: FT.SEARCH
query searchCustomer_1 {
    searchCustomer(q: "%a%") {
        id
        name
        industry
    }
}


query searchCustomer_2 {
    searchCustomer(q: "Red*") {
        id
        name
        industry
    }
}
